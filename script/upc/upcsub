#!/bin/sh
#
# upcsub -n np exe args

subname=upcsub
which_script=/share/cs-instructional/cs5220/local/upc/etc/upcscript
source /share/cs-instructional/cs5220/local/etc/subbasement.sh

cat <<EOF > $SUBFILE
# HTCondor script generated by $subname
universe = parallel
executable = $which_script
getenv = true
arguments = `pwd` $hast $EXE $@
#should_transfer_files = yes
#when_to_transfer_output = on_exit_or_evict
output = $BASENAME-o.\$(NODE)
error  = $BASENAME-e.\$(NODE)
log    = $BASENAME-l
notification = never
machine_count = $NP
EOF

write_reqs
echo "queue" >> $SUBFILE

condor_submit $SUBFILE
