#!/bin/sh
#
# ompsub -n np exe args

subname=ompsub
which_script=/share/cs-instructional/cs5220/local/etc/ompsubscript
source /share/cs-instructional/cs5220/local/etc/subbasement.sh

cat <<EOF > $SUBFILE
# HTCondor script generated by $subname
universe = vanilla
executable = $which_script
getenv = true
arguments = "$NP $hast $@"
request_cpus = $NP
notification = never
EOF

write_reqs

cat <<EOF >> $SUBFILE

output = $BASENAME.o
error  = $BASENAME.e
log    = $BASENAME.l
queue
EOF

if [ -z "$hasd" ]; then
  condor_submit $SUBFILE
fi
